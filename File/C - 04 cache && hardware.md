# C - 04 cache && hardware
![](image/c.png)

> ä¸çŸ¥é“å¤§ä¼™çœ‹åˆ°è¿™ä¸ªé¢˜ç›®æœ‰æ²¡æœ‰è§‰å¾—ï¼šæˆ‘ä»¬å­¦è½¯ä»¶çš„æ€Žä¹ˆè¿˜è¦åŽ»äº†è§£ç¡¬ä»¶å‘¢ï¼Ÿ
> 
> ðŸ¤”ä¼šå†™ç¨‹åºä¸å°±å¤Ÿäº†å˜›ã€‚æˆ‘ä»¬å’Œé‚£äº›ç ´ä¿®ç”µè„‘çš„èƒ½æ¯”å—ï¼ˆbushiï¼‰ã€‚ä½†å°±åƒæ•°å­¦çš„å‘å±•éƒ½æ˜¯åŸºäºŽæˆ‘ä»¬å°å­¦ç”šè‡³å¹¼å„¿å›­æ‰€å­¦çš„1+1=2è¿™æ ·åŸºç¡€çš„è¿ç®—è€Œæ¥ï¼Œæˆ‘ä»¬æ‰€å­¦çš„è½¯ä»¶ï¼Œä¹Ÿæ˜¯è¦åŸºäºŽç¡¬ä»¶æ‰èƒ½å®žçŽ°çš„ã€‚é“ç†å¾ˆç®€å•ï¼Œè‹¥æ•°å­¦ä¸Šï¼Œ1+1è¢«è¦æ±‚ç­‰äºŽ3ï¼Œé‚£ä¹ˆå¦‚ä»Šçš„æ•°å­¦å‘å±•è‚¯å®šæˆªç„¶ä¸åŒã€‚ä¹‹äºŽè½¯ä»¶æ¥è¯´ï¼Œå¦‚æžœç¡¬ä»¶çš„è®¾è®¡æ˜¯å¦ä¸€ç§æ–¹æ¡ˆï¼Œæˆ‘ä»¬æ‰€ç”¨çš„è¯­è¨€ï¼Œæ‰€å†™çš„è½¯ä»¶ï¼Œä¹Ÿå®Œå…¨æœ‰å¯èƒ½æ˜¯å¦ä¸€å¹…æƒ…æ™¯ï¼Œåº”ç”¨ä¹Ÿä¼šæœ‰å¤©å·®åœ°åˆ«ã€‚ðŸŽ†å•°é‡Œå•°å”†ï¼Œå°±æ˜¯æƒ³å‘Šè¯‰å¤§å®¶ï¼Œè½¯ä»¶çš„å®žè¡Œæ˜¯åŸºäºŽç¡¬ä»¶ä¹‹ä¸Šçš„ï¼Œè€Œä¸æ˜¯ç‹¬ç«‹å­˜åœ¨çš„ï¼Œä½ æ‰€ç”¨çš„ç¼–ç¨‹è½¯ä»¶ç»è¿‡ç¼–è¯‘å™¨ç­‰å¤„ç†è¿‡åŽï¼Œæœ€åŽéƒ½ä¼šè½¬åŒ–æˆç¡¬ä»¶çš„ä¸€æ­¥ä¸€æ­¥æ“ä½œï¼Œå¦‚æžœç¡¬ä»¶ä¸æ”¯æŒæŸä¸€æ ·æ“ä½œï¼Œé‚£è½¯ä»¶è‡ªç„¶ä¹Ÿä¸èƒ½è€ƒè™‘è¿™æ ·åŽ»æ‰§è¡Œã€‚åŒæ—¶ï¼Œå¾ˆå¤šè¯­è¨€çš„è®¾è®¡å’Œå…¶èƒŒåŽçš„åŽŸç†ï¼Œéƒ½ä¸Žç¡¬ä»¶æ¯æ¯ç›¸å…³ï¼ˆæ¯•ç«Ÿç¨‹åºçš„æ‰§è¡Œæœ€åŽæ˜¯å’Œç¡¬ä»¶å¯¹æŽ¥ï¼‰ï¼Œæˆ‘ä»¬åŽ»äº†è§£ç¡¬ä»¶ï¼Œå…¶å®žä¹Ÿæ˜¯ä¸ºäº†æ›´å¥½çš„åŽ»å­¦ä¹ æˆ‘ä»¬çš„è¯­è¨€ï¼Œæ›´å¥½çš„æŽŒæ¡è®¡ç®—æœºè¿™é—¨åšå¤§ç²¾æ·±çš„å­¦ç§‘ï¼Œå¯¹ç¡¬ä»¶çŸ¥è¯†çš„äº†è§£æ·±å…¥ï¼Œåè€Œèƒ½è®©ä½ ä»ŠåŽåœ¨ä»ŠåŽçš„å­¦ä¹ ä¸­æ›´åŠ å¦‚é±¼å¾—æ°´ã€‚å½“ç„¶ï¼Œå¤§å®¶åˆ«æ€¥ï¼Œæˆ‘ä»¬æ¯•ç«Ÿæ˜¯å†™è½¯ä»¶çš„ï¼Œä¸ç”¨å­¦ä¹ åˆ°ä¼šè‡ªå·±é€ ç¡¬ä»¶è¿™ç§ç¨‹åº¦ï¼ˆ-.-)ï¼Œåœ¨æœ¬é¢˜ä¹ƒè‡³ä»ŠåŽçš„å­¦ä¹ ä¸­ï¼Œæ›´å¤šçš„ï¼Œæˆ‘ä»¬ä¼šæŠŠç¡¬ä»¶æŠ½è±¡å‡ºæ¥ç ”ç©¶ä¸Žå­¦ä¹ ã€‚ðŸ˜˜
> 
> å¤§å®¶åˆšè¿›æ¥ï¼Œä¹Ÿä¸æ±‚å¤§å®¶èƒ½å¯¹æ‰€æœ‰ç¡¬ä»¶éƒ½æœ‰æ‰€æ¶‰åŠï¼Œå¯èƒ½ä¼šæœ‰ç‚¹å¼ºäººæ‰€éš¾äº†ã€‚æ‰€ä»¥æˆ‘ä»¬å°±æŒ‘å‡ ä¸ªéƒ¨åˆ†æ¥è€ƒæ ¸å­¦ä¹ å§~

## Tips
æœ¬é¢˜çœ‹çš„å†…å®¹ä¼šå¤šä¸€äº›ï¼Œå†™çš„å†…å®¹ä¼šå°‘ä¸€äº›ï¼ŒçŸ¥è¯†ä¸Šè€¦åˆæ€§ä¸é«˜ï¼Œå¸Œæœ›å†™ç‚¹ä¸œè¥¿çš„åŒå­¦ä¹Ÿå¯ä»¥è‡ªè¡Œè·³åˆ°åŽé¢çš„partå®Œæˆã€‚
## Part 0 æ¥ç‚¹ç®€å•çš„ç¡¬ä»¶
~~å¯¹ç¡¬ä»¶ä¸æ€Žä¹ˆäº†è§£çš„å°ä¼™ä¼´å¯ä»¥åšä¸€åš~~
äº†è§£ä¸‹ç”µè„‘è¦èƒ½è·‘èµ·æ¥éœ€è¦å“ªäº›éƒ¨ä»¶äº†è§£ä¸‹ç”µè„‘çš„å„ä¸ªæŽ¥å£ï¼ˆå†…éƒ¨ï¼šæ¯”å¦‚è¯´ä¸‹é¢çš„æ¿å­ä¸Šè¿™äº›æ’æ§½ï¼Œå¤–éƒ¨ï¼šæ¯”å¦‚USBï¼‰åº·åº·è¿™å—10å¹´å‰çš„ä¸»æ¿æœ‰äº›ä»€ä¹ˆæŽ¥å£
![](image/asynccod1e.png) 



äº†è§£ä¸‹å—æ¡¥å’ŒåŒ—æ¡¥ ä¸‹è½½ä¸€ä¸ªCPU-Zï¼Œè¯•ç€è§£è¯»ä¸€ä¸‹å„é¡¹ä¿¡æ¯ï¼ˆæ¯”å¦‚CPUæž¶æž„ã€å†…å­˜é¢‘çŽ‡ç­‰ç­‰ï¼‰ [cpu-zå’ŒGPU-zçš„ä¸‹è½½](https://share.weiyun.com/2NgSuDdi)

![](image/asy2nccode.png)

## Part 0.5 IOIOIOIOIOIOIOIO
![](image/async4code.png)

äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯å®žæ¨¡å¼ï¼Œä»€ä¹ˆæ˜¯ä¿æŠ¤æ¨¡å¼ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æœ‰äº›ä»€ä¹ˆï¼Ÿä¾‹å¦‚ä¸¤è€…ä¹‹ä¸‹çš„é€šç”¨å¯„å­˜å™¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæˆ‘ä»¬çŽ°åœ¨è®¡ç®—æœºä¸»æµé‡‡ç”¨ä»€ä¹ˆæ¨¡å¼å‘¢ï¼Ÿ
ä¸ºä»€ä¹ˆä¼šæœ‰å®žæ¨¡å¼å’Œä¿æŠ¤æ¨¡å¼çš„åŒºåˆ†å‘¢ï¼ŸIPv4å’ŒIPv6æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŒIPv6ä¹‹äºŽIPv4æ ¼å¼ä¸Šåšäº†å“ªäº›æ‰©å……å’Œæ”¹å˜ï¼Ÿä¸ºä»€ä¹ˆè®¡ç®—æœºå–œæ¬¢æœ‰è¿™ä¹ˆç¹ççš„åˆ†ç±»å‘¢ï¼Ÿ

ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰æƒ³è¿‡CPUå¦‚ä½•æ“æŽ§ç¡¬ä»¶å‘¢ï¼Œè¿™ä¸€èŠ‚é‡Œæƒ³å¸¦å¤§å®¶è®¤è¯†ä¸€ä¸‹IOè¿™ä¸ªæ¦‚å¿µã€‚
IOæ˜¯ä»€ä¹ˆæ„æ€ï¼ŸIOè®¾å¤‡æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ~~é‚£OIå‘¢(OIçˆ·ï¼QAQ)~~
ä»€ä¹ˆæ˜¯IOæŽ¥å£ï¼ŸIOæŽ¥å£çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿå¯¹äºŽCPUæ¥è¯´ï¼ŒIOæŽ¥å£ç›¸å¯¹äºŽIOè®¾å¤‡çš„è¿™ç§"ç®€åŒ–"æ˜¯ä¸€ç§ä»€ä¹ˆï¼Ÿå°è¯•äº†è§£ä¸€ä¸‹åœ¨IOæŽ¥å£ä¸ŽCPUä¹‹é—´æ˜¯å¦æœ‰æ›´åŠ "ç®€åŒ–"çš„è®¾è®¡å­˜åœ¨ï¼Œå®ƒ(æˆ–è€…å®ƒä»¬)çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ
ä»€ä¹ˆæ˜¯ç«¯å£ï¼Ÿé‚£ä¹ˆIOç«¯å£å‘¢ï¼ŸIOç«¯å£å·å’Œå†…å­˜åœ°å€æœ‰ä»€ä¹ˆå…±åŒç‚¹ï¼Ÿ
ï¼ˆé€‰åšï¼Œå…¶å®žæ‰€æœ‰çš„é¢˜å¤§å®¶å°½åŠ›å°±å¥½ï¼‰æœ‰æ²¡æœ‰å…¶ä»–ç¡¬ä»¶è®¾è®¡ä¹Ÿé‡‡ç”¨äº†IOæŽ¥å£ä¹‹äºŽCPUä¸Žç¡¬ä»¶è¿™æ ·çš„è®¾è®¡æ€æƒ³ï¼Ÿè¯´è¯´è¿™ç§æ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆè¿™ç§æ€æƒ³å¹¿æ³›çš„è¿ç”¨äºŽè®¡ç®—æœºé¢†åŸŸï¼‰

## Part 1 è°æƒ³åœ¨ä¸»æœºé‡Œçƒ§ç„¦ï¼Ÿ æˆ‘ï¼


![](image/asyncc5ode.png)


â€‹	ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰çœ‹è¿‡é‚£ç§æˆ‘çš„ä¸–ç•Œï¼ˆMinecraftï¼‰é¡¶çº§æè´¨åŒ…è§†é¢‘ä¸­æ–‘æ–“è‰²å½©çš„ç”»é¢ï¼Œçœ‹ç€ç”»é¢ç¡®å®žè®©äººå¦‚ç—´å¦‚é†‰ï¼Œä½†æ˜¯å´ä¹Ÿè®©äººä¸ç¦å¯¹å…¶æ˜¾å¡æ„Ÿåˆ°åŒæƒ…ä¸Žæ‹…å¿ƒã€‚æˆ–è€…å¤§å®¶å¹³æ—¶æœ‰æ²¡æœ‰ä¹°äº†ä¸€æ¬¾æ¸¸æˆå´å› ä¸ºç”»è´¨å¡é¡¿è€Œæ— å¥ˆå¼ƒå‘å‘¢ï¼Œåæ­£æˆ‘çš„åŠžå…¬æœ¬æ˜¯ç»å¸¸ç¢°åˆ°è¿™ç§æƒ…å†µçš„ï¼Œå¤§é•–å®¢2è¿˜ææˆ‘ç”µè„‘é‡Œèººç€ç§¯ç°å‘¢(à²¥ï¹à²¥)ã€‚è¿™ä¸€èŠ‚æˆ‘æƒ³å¸¦å¤§å®¶ç®€ç•¥è®¤è¯†ä¸€ä¸‹æ˜¾å¡çš„æœºåˆ¶ï¼ˆæ²¡åƒè¿‡çŒªè‚‰åªèƒ½çœ‹çŒªè·‘äº†QAQï¼‰ï¼Œå¤§å®¶åˆ«ç€æ€¥ï¼Œå†™çš„å†…å®¹ä¼šæ”¾åœ¨ä¸‹ä¸€èŠ‚ï¼Œå¤§å®¶å†å¿ä¸€å¿ï¼Œå¤šå­¦ç‚¹çŸ¥è¯†ä¸åƒäºçš„ã€‚
**ä»€ä¹ˆæ˜¯GPU?å¯¹æ¯”ä¸€ä¸‹CPUä¸ŽGPUçš„å…±é€šç‚¹ï¼Ÿï¼ˆCPUæœ‰å¤§å®¶ç†ŸçŸ¥çš„å†…å­˜ï¼Œé‚£ä¹ˆGPUå‘¢)**

### å¾€æ˜¾å­˜é‡Œå†™ç‚¹ä»€ä¹ˆ
æœ¬å°èŠ‚ä¸»è¦è·Ÿå¤§å®¶è®²è®²ç®€å•çš„æ–‡æœ¬æ€Žä¹ˆæ‰“å°ï¼Œä»Žä¸­æ›´åŠ æ·±åˆ»çš„äº†è§£æ˜¾å­˜ï¼Œå¾€æ˜¾å­˜é‡Œé¢å†™ä¸œè¥¿ï¼Œæˆ‘ä»¬è¦æžæ‡‚ä¸‰ä¸ªé—®é¢˜ï¼šå†™è¿›åŽ»çš„æ˜¯ä»€ä¹ˆï¼Œå¾€å“ªé‡Œå†™ï¼Œæ€Žä¹ˆå†™è¿›åŽ»ï¼Ÿ
#### å†™äº†ä¸ªå•¥å•Šï¼Ÿ
å¦‚æžœå¤§å®¶æ˜¯ç¡¬ä»¶è®¾è®¡å¸ˆï¼Œä¼šå¦‚ä½•è§„èŒƒåˆ¶å®šæ˜¾å­˜çš„æ˜¾ç¤ºå•ä½å‘¢ï¼Œå¤§å®¶ä¸å¦¨è°ˆä¸€è°ˆè‡ªå·±çš„çœ‹æ³•ã€‚

äº†è§£ä¸€ä¸‹æ˜¾å­˜çš„å­—ç¬¦æ˜¯æ€Žä¹ˆæ ·ä½œä¸ºæ•°æ®ä¼ è¾“çš„ï¼ˆæ–‡æœ¬æ¨¡å¼å“Ÿï¼‰ï¼Œæè¿°ä¸€ä¸‹æ¯ä¸ªä½éƒ½æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Œå‰æ™¯è‰²ä¸Žæ·±æ™¯è‰²éƒ½æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ
**0x0747 0x076c 0x0769 0x076d 0x076d 0x0765 0x0772 æ˜¯ä»€ä¹ˆå«ä¹‰å‘¢ï¼Ÿ**

#### å¾€å“ªå„¿å†™å•Šï¼Ÿ

ç­”æ¡ˆæ˜¯å…‰æ ‡ï¼Œæˆ–è®¸è¿™ä¸ªé—®é¢˜åº”è¯¥å«åœ¨å±å¹•ä¸Šå¾€å“ªé‡Œå†™p>.<q
**äº†è§£ä¸€ä¸‹æƒ³è¦æŽ§åˆ¶å…‰æ ‡éœ€è¦ç”¨åˆ°ä»€ä¹ˆï¼Œé‡‡å–æ€Žæ ·çš„æ“ä½œã€‚**
**æƒŠï¼Œç­”æ¡ˆå‚è€ƒå›¾ç«Ÿæµå‡ºï¼ˆbushiï¼‰ï¼Œæ˜¾å­˜é‡Œé¢ä¹Ÿæœ‰å¯„å­˜å™¨ï¼ˆÎ£(ã£ Â°Ð” Â°;)ã£ï¼‰ï¼Œå¿«åŽ»äº†è§£äº†è§£å®ƒä»¬å¦‚ä½•è¿›è¡Œå¯¹æ˜¾å­˜å’Œå…¶ç›¸å…³è®¾å¤‡çš„è¯»å†™ã€‚**

![](image/asyncco6de.png)

![](image/asynccod7e.png)

**ç›¸ä¿¡å¤§å®¶å·²ç»åœ¨ç½‘ä¸Šåšè§ˆç¾¤ä¹¦ï¼Œå¯¹æ˜¾å­˜å¯„å­˜å™¨æœ‰ä¸€å®šäº†è§£äº†ï¼Œå¦‚æžœæˆ‘æƒ³èŽ·å–åˆ°å…‰æ ‡çš„ä½ç½®ï¼Œåº”è¯¥æ€Žä¹ˆæ“ä½œå‘¢ï¼Ÿï¼ˆé˜è¿°å¿…è¦æ­¥éª¤å°±å¯ä»¥äº†ï¼‰ï¼ˆæ€•å¤§å®¶ç»•è¿›åŽ»æä¸€å˜´ï¼Œhæœ‰å®ƒè‡ªå·±çš„å«ä¹‰-.-)**

#### æœ€å¾Œã®è³ªå•ï¼Œå’‹å†™è¿›åŽ»å•Šï¼Ÿ
æœ¬å°èŠ‚åªæ¶‰åŠä¸€ç‚¹ç‚¹ç®€å•çš„æ±‡ç¼–çŸ¥è¯†ï¼Œç¬”è€…ç»å¯¹æ˜¯å› ä¸ºç›¸ä¿¡å¤§å®¶çš„å®žåŠ›æ‰åªåšäº†ä¸€ç‚¹è§£æžçš„ï¼Œç»ä¸æ˜¯å› ä¸ºæ‡’ã€‚

<img src="image/asynccod9e.png" style="text-align: center;">



æ€æ¥æƒ³åŽ»è¿˜æ˜¯å¿ƒç–¼ä¸€ä¸‹å„ä½å­¦å¼Ÿå­¦å¦¹ä»¬ï¼Œç»™å¤§å®¶ä¸€ç‚¹å°tip,è«¸å›å¦‚æžœæœ‰æŽ¥è§¦C03çš„å†…è”æ±‡ç¼–ï¼Œåº”è¯¥å‘çŽ°è¿™é‡Œçš„æ±‡ç¼–æ ¼å¼æ€ªæ€ªçš„ï¼Œå»ºè®®å¤§å®¶äº†è§£ä¸€ä¸‹AT&Tä¸ŽIntelä¹‹é—´çš„åŒºåˆ«ã€‚

```
mov byte [gs:0x00],'1' 
mov byte [gs:0x01],0xA4 

mov byte [gs:0x02],' '
mov byte [gs:0x03],0xA4 

mov byte [gs:0x04],'M' 
mov byte [gs:0x05],0xA4 

mov byte [gs:0x06],'B' 
mov byte [gs:0x07],0xA4 

mov byte [gs:0x08],'R' 
mov byte [gs:0x09],0xA4 
;ç›´æŽ¥å‘ç¼“å­˜é‡Œé¢å†™å…¥æ•°æ®  


mov dx 0x03d4 
mov al, 0x0e 
out dx,al 
mov dx,0x03d5 
in al,dx 
mov ah,al ;å…ˆèŽ·å¾—é«˜å…«ä½

mov dx,0x03d4 
mov al,0x0f
out dx,al 
mov dx,0x03d5
in al,dx ;å†èŽ·å¾—ä½Žå…«ä½ 
;èŽ·å–æ˜¾å­˜çš„æŸäº›ä¿¡æ¯
```
## Part 2 å†å¿«ç‚¹ï¼Œå†å¿«ç‚¹ï¼ˆè¿™ä¸€éƒ¨åˆ†å»ºè®®é˜…è¯»ã€ŠCSAPPã€‹ç¬¬6ç« èŠ‚ï¼‰
ç¼“å­˜ä¸çŸ¥é“å¤§å®¶äº†è§£è¿‡æ²¡æœ‰ï¼Œä½†æ˜¯å†…å­˜å¤§å®¶ä¸€å®šçŸ¥é“å§ï¼Œè¿˜æœ‰æ‰“å¼€æŸ¥çœ‹ç”µè„‘ä¿¡æ¯ï¼Œä¸Šé¢çš„Cç›˜,Dç›˜ï¼Œå®ƒä»¬éƒ½å¯ä»¥å«åšç¼“å­˜ã€‚ç¼“å­˜å¯ä»¥è¯´æ˜¯ä¸€é¡¹éžå¸¸ä¼Ÿå¤§çš„å‘æ˜Žï¼Œåœ¨æ²¡æœ‰ç¼“å­˜çš„å¹´ä»£ï¼Œç”µè„‘ä¸èƒ½è¯´æ˜¯æœ‰ç‚¹å°å¡å§ï¼Œåªèƒ½è¯´æ˜¯æ…¢çš„è§è€…è½æ³ªã€‚åŽæ¥éšç€æ—¶ä»£çš„å‘å±•ï¼Œç¼“å­˜è¢«å¼€å‘å‡ºæ¥ï¼Œç»™ç”µè„‘å¸¦æ¥äº†æ¬¡æ–¹çº§åˆ«çš„é€Ÿåº¦æå‡ï¼Œä½ æˆ‘çš„ç”µè„‘ï¼Œæ‰èƒ½å› æ­¤æœ‰æµç•…çš„ä½“éªŒã€‚
### æ¥ç‚¹åŸºç¡€ç¼“å­˜çŸ¥è¯†
ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿç”µè„‘ä¸­æœ‰å“ªäº›å¯ä»¥è¢«è§†ä¸ºç¼“å­˜ï¼Ÿ
äº†è§£ä¸€ä¸‹å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æž„ï¼ŒL1,L2,L3,L4è¿™äº›éƒ½æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿå®ƒä»¬çš„é€Ÿåº¦æ¯”è¾ƒèµ·æ¥æ€Žä¹ˆæ ·ï¼Ÿå®ƒä»¬éƒ½ä½äºŽä»€ä¹ˆä½ç½®ï¼Œæˆ–è€…æœ‰åˆ«ç§°å˜›ï¼Ÿ
äº†è§£ä¸€ä¸‹ç¡¬ç›˜é•¿ä»€ä¹ˆæ ·å­ï¼Œç£é“ï¼Œç›˜é¢ï¼ŒæŸ±é¢ï¼Œæ‰‡åŒºï¼Œè½¬åŠ¨è‡‚ï¼Œä¸»è½´éƒ½æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼ŸSRAMï¼ŒDRAMè¿™äº›éƒ½æ˜¯ä»€ä¹ˆï¼Ÿç¡¬ç›˜æ˜¯ç¼“å­˜å˜›ï¼Ÿ
### çœ‹ç´¯äº†æ¥åŠ¨åŠ¨æ‰‹å§


æ­¤éƒ¨åˆ†ç»™å¤§å®¶ä¸€ç‚¹å¼•å¯¼æ€§çš„é—®é¢˜ï¼Œé¢˜ç›®ä¸­ä¹Ÿä¼šé€‚å½“ç»™å‡ºä¸€äº›å‚è€ƒå†…å®¹ï¼Œä¸»è¦æ˜¯ç»™å¯èƒ½å› ä¸ºå„ç§åŽŸå› æ²¡æœ‰é˜…è¯»CSAPPå¯¹åº”ç« èŠ‚çš„åŒå­¦çš„ï¼Œç¬”è€…è¿˜æ˜¯å¼ºçƒˆå»ºè®®å¤§å®¶åŽ»é˜…è¯»CSAPPå¯¹åº”ç« èŠ‚ã€‚ä½œä¸ºC04çš„åŽ‹è½´é¢˜ï¼Œè¿™é“é¢˜è‚¯å®šæ˜¯æœ‰ä¸€å®šéš¾åº¦çš„ï¼Œå¸Œæœ›å¤§å®¶ä¸è¦ç°å¿ƒï¼ŒåŠªåŠ›æŠŠå®ƒæ‹¿ä¸‹ï¼
**ç¼“å­˜æ˜¯å¦‚ä½•è®¾è®¡è¿ä½œçš„ï¼Ÿ**
ä¾‹å¦‚ï¼š
æ¯æ¡ä¿¡æ¯çš„å­˜å‚¨å•ä½æ˜¯æ€Žæ ·çš„? E b téƒ½æœ‰ä»€ä¹ˆå«ä¹‰ï¼Ÿ
ç¼“å­˜ä¸­ä¿¡æ¯æ»¡è½½äº†åº”è¯¥æ€Žä¹ˆåŠžï¼Ÿ
**å¦‚ä½•è¯»å–æ–‡ä»¶ï¼Ÿ**
**äº†è§£ä¸€ä¸‹getoptå‡½æ•°æ˜¯æ€Žæ ·å¤„ç†å­—ç¬¦ä¸²çš„ï¼Ÿ**

æœ¬é¢˜ï¼Œä½ è¦å®žçŽ°ä¸€ä¸ªtiny cacheï¼Œå®ƒéœ€è¦æ»¡è¶³ç¼“å­˜çš„ä»¥ä¸‹åŠŸèƒ½ï¼š
å¯ä»¥è‡ªå®šä¹‰å…¶å¤§å°ç»“æž„ï¼›
è¯»å–ç›¸åº”çš„ç›®æ ‡æ–‡ä»¶å¹¶å¾—åˆ°æ­£ç¡®çš„è¾“å‡ºï¼Œè¾“å…¥æ–‡ä»¶ç¤ºä¾‹å¦‚ä¸‹ï¼š
```
L 10,1 
M 20,1 
L 22,1 
S 18,1  
L 110,1 
L 210,1  
M 12,1 
```
æ¯è¡Œæ ¼å¼å¦‚ä¸‹ï¼š
```
operation address,size 
/*For operation,L denotes a data load,
S a data store,M a data modify
(a data store after a data load) For address,
it is denoted in hexadecimal terms.For size,1 byte per '1'*/
```

è¾“å‡ºï¼š
```
hits:4 misses:5 evictions:3
```
ç¤ºä¾‹å±•ç¤ºï¼š
```
/* your teminal input: 
./tiny_cache -s 4 -E 1 -b 4 -t traces/yi.trace */
//output 
L 10,1 miss 
M 20,1 miss hit 
L 22,1 hit 
S 18,1 hit 
L 110,1 miss eviction 
L 210,1 miss eviction 
M 12,1 miss eviction hit 
hits:4 misses:5 evictions:3
```
tips:é©±é€ç­–ç•¥å¯ä»¥ä½¿ç”¨æœ€ç®€å•çš„LRUç­–ç•¥ï¼›
æ•´ä¸ªçš„å®žçŽ°åªæ˜¯ç»™å¤§å®¶ä¸€ä¸ªå‚è€ƒï¼Œå¤§å®¶ä¹Ÿå¯ä»¥é€‚å½“è¿›è¡Œè®©è‡ªå·±æ›´æœ‰åˆ©çš„æ”¹å˜ï¼›
ç»™å¤§å®¶2æ®µä»£ç ä½œä¸ºå‚è€ƒæ–‡ä»¶ï¼Œç¤ºä¾‹çš„ä»£ç æ®µä¹Ÿå¯ä»¥å‚è€ƒï¼Œå¤§å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œè®¾è®¡ï¼š
```
//text 1 
L 10,4  
S 18,4 
L 20,4 
S 28,4 
S 50,4
```
```
//text 2 
L 0,1 
L 1,1 
L 2,1 
L 3,1 
S 4,1 
L 5,1 
S 6,1 
L 7,1 
S 8,1 
L 9,1 
S a,1 
L b,1 
S c,1 
L d,1 
S e,1
M f,1
```

## ç»“è¯­
å«©ç‰›å•Šï¼Œå¤§å®¶èƒ½åšæŒåˆ°æœ€åŽï¼Œå¯å–œå¯è´ºï¼Œå¯å–œå¯è´ºï¼æˆ‘çŸ¥é“è¿™é“é¢˜æœ‰yiç‚¹ç‚¹åˆè‡­åˆé•¿ï¼Œä½†æ˜¯æˆ‘ç›¸ä¿¡å¤§å®¶ä¸€å®šå¯¹ç¡¬ä»¶æœ‰äº†æˆªç„¶ä¸åŒçš„äº†è§£ä¸Žè®¤è¯†ï¼Œç›¸ä¿¡åœ¨ä»¥åŽçš„å­¦ä¹ ä¸­ï¼Œè‚¯å®šèƒ½å¾ˆå¥½çš„å¸®åŠ©åˆ°å¤§å®¶çš„ï¼Œé‚£ä¹ˆå¤§å®¶ä¸‹é¢˜è§~


![](image/asynccode.gif)


## **é¢˜ç›®è¦æ±‚**

- æ­£ç¡®çš„å¯æ‰§è¡Œçš„ä»£ç 
- å›žç­”é¢˜ç›®ä¸­çš„é—®é¢˜æ—¶ï¼Œå¯ä»¥ç»“åˆå›¾ç‰‡è¡¨è¾¾è‡ªå·±çš„æƒ³æ³•
- è‰¯å¥½çš„ä»£ç ä¹ æƒ¯ï¼ˆåŠ åˆ†é¡¹ï¼‰
- ä»£ç è¿è¡Œçš„æˆªå›¾


## **æœ¬é¢˜æäº¤æ–¹å¼**
>æ”¶ä»¶é‚®ç®±ï¼š[glimmer401@outlook.com](mailto:glimmer401@outlook.com)
>
>ä¸»é¢˜æ ¼å¼ï¼š å­¦å·-å§“å-è€ƒæ ¸-C-04
>
>ä¸»é¢˜ç¤ºä¾‹ï¼š2022090101012-å¼ ä¸‰-è€ƒæ ¸-C-04

## **å‡ºé¢˜äººè”ç³»æ–¹å¼**
> QQï¼š1206370306
>
> é‚®ç®±ï¼š1206370306@qq.com 

